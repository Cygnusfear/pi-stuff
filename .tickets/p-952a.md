---
id: p-952a
status: closed
deps: []
links: []
created: 2026-02-16T15:37:11Z
type: task
priority: 1
assignee: Alexander Mangel
tags: [git, history, main]
---
# Linearize main history after accidental merge sync

Create backup refs first, then rewrite main from merge commit db3e782 to a linear history preserving commits from both remotes, and force-push safely to origin and forgejo.



## Goal
Restore linear history on main while preserving all work and creating rollback backups.

## Acceptance Criteria
- [ ] Backup branch/tag exists pointing to current merged main before rewrite
- [ ] main no longer contains merge commit db3e782 and is linear
- [ ] All intended changes from commits 0268a40, 0629a65, and 85e528c are preserved
- [ ] origin/main and forgejo/main point to the same linear commit
- [ ] Verification shows 0 ahead/behind vs both remotes

## Verification
- [ ] git log --graph --oneline -n 10 shows linear main history
- [ ] git rev-list --count --merges -n? (or log inspection) confirms no recent merge on main
- [ ] git rev-list --left-right --count origin/main...main == 0 0
- [ ] git rev-list --left-right --count forgejo/main...main == 0 0

## Worktree
- .

## Notes

**2026-02-16T15:38:39Z**

Backed up pre-rewrite state to branch backup/main-before-linear-20260216-163753 and tag backup-main-before-linear-20260216-163753 on both origin and forgejo. Rewrote main linearly to 2ec0c51 (0629a65 + cherry-pick of 85e528c) and force-pushed with lease. Verified origin/main == forgejo/main == HEAD and both ahead/behind are 0/0.
