---
id: p-2869
status: closed
deps: []
links: []
created: 2026-02-13T11:40:10Z
type: task
priority: 2
assignee: powerline-cleanup
tags: [team]
---
# Strip the powerline-footer extension of dead weight. Working directory: the pi repo root.

## What to remove:

1. **working-vibes.ts** — delete entirely
2. **welcome.ts** — delete entirely  
3. **colors.ts** — delete entirely (theme.ts is the real color system)
4. The `/vibe` command registration in index.ts (the entire registerCommand block for 'vibe')
5. All vibe imports and references in index.ts
6. All welcome/dismissWelcome code in index.ts (the functions, the state vars like `dismissWelcomeOverlay`, `welcomeHeaderActive`, `welcomeOverlayShouldDismiss`, the `dismissWelcome` function, `setupWelcomeHeader`, `setupWelcomeOverlay`, and all calls to them)
7. The `onVibeAgentEnd` call in the agent_end handler (keep the handler, just remove the vibe line — keep `isStreaming = false`)

## What to clean up:

1. **WERNER_COLORS should become the DEFAULT_COLORS** in theme.ts — it's the only scheme actually used. The current DEFAULT_COLORS in theme.ts has `path: '#7D56F4'` but WERNER has `path: 'success'`. Make WERNER's values the real defaults.
2. **presets.ts** — the default preset uses WERNER_COLORS, just make it use DEFAULT_COLORS (which is now WERNER's values). Remove the separate WERNER_COLORS constant. Keep other presets but make sure they still work.
3. **If colors.ts exports anything used by segments.ts or other files**, inline those into theme.ts or segments.ts before deleting colors.ts. Check all imports of colors.ts across the codebase.
4. Remove any unused imports after cleanup.

## Rules:
- Do NOT touch the segment rendering logic in segments.ts (keep all segments working)
- Do NOT touch git-status.ts
- Do NOT break the footer rendering — the powerline must still work after changes
- Keep the `/powerline` command
- Keep icons.ts and separators.ts
- Run `cd /Users/alexander/Projects/pi && bun test` after to verify nothing breaks
- Count lines before and after to report savings

Strip the powerline-footer extension of dead weight. Working directory: the pi repo root.

## What to remove:

1. **working-vibes.ts** — delete entirely
2. **welcome.ts** — delete entirely  
3. **colors.ts** — delete entirely (theme.ts is the real color system)
4. The `/vibe` command registration in index.ts (the entire registerCommand block for 'vibe')
5. All vibe imports and references in index.ts
6. All welcome/dismissWelcome code in index.ts (the functions, the state vars like `dismissWelcomeOverlay`, `welcomeHeaderActive`, `welcomeOverlayShouldDismiss`, the `dismissWelcome` function, `setupWelcomeHeader`, `setupWelcomeOverlay`, and all calls to them)
7. The `onVibeAgentEnd` call in the agent_end handler (keep the handler, just remove the vibe line — keep `isStreaming = false`)

## What to clean up:

1. **WERNER_COLORS should become the DEFAULT_COLORS** in theme.ts — it's the only scheme actually used. The current DEFAULT_COLORS in theme.ts has `path: '#7D56F4'` but WERNER has `path: 'success'`. Make WERNER's values the real defaults.
2. **presets.ts** — the default preset uses WERNER_COLORS, just make it use DEFAULT_COLORS (which is now WERNER's values). Remove the separate WERNER_COLORS constant. Keep other presets but make sure they still work.
3. **If colors.ts exports anything used by segments.ts or other files**, inline those into theme.ts or segments.ts before deleting colors.ts. Check all imports of colors.ts across the codebase.
4. Remove any unused imports after cleanup.

## Rules:
- Do NOT touch the segment rendering logic in segments.ts (keep all segments working)
- Do NOT touch git-status.ts
- Do NOT break the footer rendering — the powerline must still work after changes
- Keep the `/powerline` command
- Keep icons.ts and separators.ts
- Run `cd /Users/alexander/Projects/pi && bun test` after to verify nothing breaks
- Count lines before and after to report savings


## Notes

**2026-02-13T11:42:47Z**

DONE: Removed working-vibes.ts (641 lines), welcome.ts (535 lines), colors.ts (140 lines). Removed /vibe command, all vibe imports/references, all welcome/dismissWelcome code, isQuietStartup, unused node:fs/node:path imports from index.ts. Merged WERNER_COLORS values into DEFAULT_COLORS in theme.ts, removed WERNER_COLORS from presets.ts. Moved ansi utilities (ansi object, getFgAnsiCode) from colors.ts to theme.ts. Total: 3397 → 1868 lines (1529 lines removed, 45% reduction). Tests pass (2 pre-existing failures unrelated to powerline).
