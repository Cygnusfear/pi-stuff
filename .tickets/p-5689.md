---
id: p-5689
status: closed
deps: []
links: []
created: 2026-02-17T07:56:53Z
type: bug
priority: 0
assignee: Alexander Mangel
tags: [teams, bug, critical]
---
# Fix teams worktree: merge worker branches before cleanup

Worker branches are force-deleted during cleanup without merging their commits back. This causes complete work loss.



## Goal
Merge worker branch commits into the parent branch before worktree+branch cleanup, preventing work loss

## Acceptance Criteria
- [ ] Worker branches are merged before deletion on successful exit
- [ ] Failed merges preserve the branch and warn the coordinator
- [ ] Killed workers don't attempt merge
- [ ] Tests cover the merge-before-cleanup flow

## Verification
- [ ] Run existing worktree tests
- [ ] New test: worker commits survive cleanup via merge
- [ ] New test: merge conflict preserves branch

## Worktree
- .
