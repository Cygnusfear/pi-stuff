---
id: p-3910
status: closed
deps: []
links: []
created: 2026-02-19T09:29:01Z
type: feature
priority: 1
assignee: Alexander Mangel
tags: [agent, bash, background, tooling]
---
# Add single bash compatibility interface for background jobs

Extend bash tooling so agents can manage background jobs via one bash-like interface while keeping existing bash_bg_* tools for compatibility.



## Goal
Let agents use one `bash` tool call surface for foreground and background execution.

## Acceptance Criteria
- [ ] `bash` tool supports foreground execution plus background start/status/logs/stop/list actions.
- [ ] Existing `bash_bg_*` tools continue to work.
- [ ] Tests cover the new single-tool action handler.

## Verification
- [ ] Run `bun test tests/background-bash/tool.test.ts tests/background-bash/manager.test.ts`.
- [ ] Run full `bun test` and document unrelated baseline failures.

## Worktree
- .

## Notes

**2026-02-19T09:29:06Z**

Added `bash` tool override in extensions/background-bash.ts with action-based compatibility surface: run/start/status/logs/stop/list and optional background=true shortcut. Exported `runBashToolAction` and refactored legacy `bash_bg_*` tools to delegate to it. Added tests in tests/background-bash/tool.test.ts for foreground exec, single-tool background lifecycle, and id validation. Updated README tool description.
